!function(c){var a=(function(){var d=0;return function(f,e){clearTimeout(d);d=setTimeout(f,e)}})();var b=false;enterActive=true;c('input[name="s"]').on("input",function(){var d=this.value;a(function(){if(d.length<=2){c(ajaxSearch.area).hide();c(ajaxSearch.button).find("span").removeClass("fa-spinner").removeClass("loading");return}
if(!b){b=true;if(ajaxSearch.livesearchactive==true){c(ajaxSearch.button).find("span").addClass("fa-spinner").addClass("loading");c(ajaxSearch.area).find("ul").addClass("process").addClass("noselect");c.ajax({type:"GET",url:ajaxSearch.api,data:"keyword="+d+"&nonce="+ajaxSearch.nonce,dataType:"json",success:function(h){if(h.error){c(ajaxSearch.area).show();var g="<b>"+$(d).text()+"</b>",i=ajaxSearch.more.replace("%s",g),f='<li class="ctsx"><a href="'+ajaxSearch.url+"/?s="+$(d).text()+' " class="more live_search_click" data-search="searchform">'+i+" "+g+"</a></li>";c(ajaxSearch.area).html("<ul><li><center><b>"+h.title+"</b></center></li>"+f+"</ul>")}else{c(ajaxSearch.area).show();var g="<b>"+d+"</b>",i=ajaxSearch.more.replace("%s",g),f='<li class="ctsx"><a href="'+ajaxSearch.url+"/?s="+d+' " class="more live_search_click" data-search="searchform">'+i+" "+g+"</a></li>";var e=[];c.each(h,function(j,k){name="";genre="";score="";type="";if(k.data["genre"]!==false){genre='<div class="genre">'+k.data["genre"]+"</div>"}
if(k.data["type"]!==false){type='<span class="type '+k.data["type"]+' ">'+k.data["type"]+"</span>"}
if(k.data["score"]!==false){score='<div class="score"><span class="fa fa-star"></span> '+k.data["score"]+"</div>"}
e.push('<li id="'+j+'"><a href="'+k.url+'" class="clearfix"><div class="poster"><img src="'+k.img+'" /></div><div class="info"><div class="title">'+k.title+"</div>"+genre+score+"</div></a></li>")});c(ajaxSearch.area).html("<ul>"+e.join("")+f+"</ul>")}},complete:function(){b=false;enterActive=false;c(ajaxSearch.button).find("span").removeClass("fa-spinner").removeClass("loading");c(ajaxSearch.area).find("ul").removeClass("process").removeClass("noselect")}})}}},500)});c(document).on("keypress","#search-form",function(d){if(enterActive){return d.keyCode!=13}});c(document).click(function(){var d=c(event.target);if(c(event.target).closest('input[name="s"]').length==0){c(ajaxSearch.area).hide()}else{c(ajaxSearch.area).show()}})}(jQuery);